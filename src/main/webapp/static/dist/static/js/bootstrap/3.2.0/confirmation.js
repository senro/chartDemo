"use strict";var $=require("node_modules/jquery/dist/jquery"),popover=require("static/js/bootstrap/3.2.0/popover"),tooltip=require("static/js/bootstrap/3.2.0/tooltip"),event_body=!1,Confirmation=function(t,n){var o=this;this.init("confirmation",t,n),$(t).on("show.bs.confirmation",function(t){o.options.onShow(t,this),$(this).addClass("open");var n=o.options,e=n.all_selector;n.singleton&&$(e+".in").not(o.$element).confirmation("hide")}),$(t).on("hide.bs.confirmation",function(t){o.options.onHide(t,this),$(this).removeClass("open")}),$(t).on("shown.bs.confirmation",function(){{var t=o.options;t.all_selector}o.$element.on("click.dismiss.bs.confirmation",'[data-dismiss="confirmation"]',$.proxy(o.hide,o)),o.isPopout()&&(event_body||(event_body=$("body").on("click",function(t){o.$element.is(t.target)||o.$element.has(t.target).length||$(".popover").has(t.target).length||(o.$element.confirmation("hide"),$("body").unbind(t),event_body=!1)})))}),$(t).on("click",function(t){t.preventDefault()})};if(!$.fn.popover||!$.fn.tooltip)throw new Error("Confirmation requires popover.js and tooltip.js");Confirmation.DEFAULTS=$.extend({},$.fn.popover.Constructor.DEFAULTS,{placement:"right",title:"Are you sure?",btnOkClass:"btn btn-sm btn-danger",btnOkLabel:"Delete",btnOkIcon:"glyphicon glyphicon-ok",btnCancelClass:"btn btn-sm btn-default",btnCancelLabel:"Cancel",btnCancelIcon:"glyphicon glyphicon-remove",href:"#",target:"_self",singleton:!0,popout:!0,onShow:function(){},onHide:function(){},onConfirm:function(){},onCancel:function(){},template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"><a data-apply="confirmation">Yes</a> <a data-dismiss="confirmation">No</a></div></div>'}),Confirmation.prototype=$.extend({},$.fn.popover.Constructor.prototype),Confirmation.prototype.constructor=Confirmation,Confirmation.prototype.getDefaults=function(){return Confirmation.DEFAULTS},Confirmation.prototype.setContent=function(){var t=this,n=this.tip(),o=this.getTitle(),e=this.getHref(),i=n.find('[data-apply="confirmation"]'),a=n.find('[data-dismiss="confirmation"]'),r=this.options;i.addClass(this.getBtnOkClass()).html(this.getBtnOkLabel()).prepend($("<i></i>").addClass(this.getBtnOkIcon())," ").attr("href",e).attr("target",this.getTarget()).off("click").on("click",function(n){r.onConfirm(n,t.$element),t.$element.confirmation("hide")}),("#"===e||""===e)&&i.removeAttr("href").removeAttr("target"),a.addClass(this.getBtnCancelClass()).html(this.getBtnCancelLabel()).prepend($("<i></i>").addClass(this.getBtnCancelIcon())," ").off("click").on("click",function(n){r.onCancel(n,t.$element),t.$element.confirmation("hide")}),n.find(".popover-title")[this.options.html?"html":"text"](o),n.removeClass("fade top bottom left right in"),n.find(".popover-title").html()||n.find(".popover-title").hide()},Confirmation.prototype.getBtnOkClass=function(){var t=this.$element,n=this.options;return t.attr("data-btnOkClass")||("function"==typeof n.btnOkClass?n.btnOkClass.call(t[0]):n.btnOkClass)},Confirmation.prototype.getBtnOkLabel=function(){var t=this.$element,n=this.options;return t.attr("data-btnOkLabel")||("function"==typeof n.btnOkLabel?n.btnOkLabel.call(t[0]):n.btnOkLabel)},Confirmation.prototype.getBtnOkIcon=function(){var t=this.$element,n=this.options;return t.attr("data-btnOkIcon")||("function"==typeof n.btnOkIcon?n.btnOkIcon.call(t[0]):n.btnOkIcon)},Confirmation.prototype.getBtnCancelClass=function(){var t=this.$element,n=this.options;return t.attr("data-btnCancelClass")||("function"==typeof n.btnCancelClass?n.btnCancelClass.call(t[0]):n.btnCancelClass)},Confirmation.prototype.getBtnCancelLabel=function(){var t=this.$element,n=this.options;return t.attr("data-btnCancelLabel")||("function"==typeof n.btnCancelLabel?n.btnCancelLabel.call(t[0]):n.btnCancelLabel)},Confirmation.prototype.getBtnCancelIcon=function(){var t=this.$element,n=this.options;return t.attr("data-btnCancelIcon")||("function"==typeof n.btnCancelIcon?n.btnCancelIcon.call(t[0]):n.btnCancelIcon)},Confirmation.prototype.getHref=function(){var t=this.$element,n=this.options;return t.attr("data-href")||("function"==typeof n.href?n.href.call(t[0]):n.href)},Confirmation.prototype.getTarget=function(){var t=this.$element,n=this.options;return t.attr("data-target")||("function"==typeof n.target?n.target.call(t[0]):n.target)},Confirmation.prototype.isPopout=function(){var t,n=this.$element,o=this.options;return t=n.attr("data-popout")||("function"==typeof o.popout?o.popout.call(n[0]):o.popout),"false"==t&&(t=!1),t};var old=$.fn.confirmation;$.fn.confirmation=function(t){var n=this;return this.each(function(){var o=$(this),e=o.data("bs.confirmation"),i="object"==typeof t&&t;i=i||{},i.all_selector=n.selector,(e||"destroy"!=t)&&(e||o.data("bs.confirmation",e=new Confirmation(this,i)),"string"==typeof t&&e[t]())})},$.fn.confirmation.Constructor=Confirmation,$.fn.confirmation.noConflict=function(){return $.fn.confirmation=old,this},module.exports=$;