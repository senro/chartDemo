define("node_modules/egis-tsc/tsc",function(e,t,i){function n(e,t,i,n,s){tscSdkObj=new I(s),tscSdkObj.init(i,e,t,i,n),tscSdkObj.generateTscCode()}function s(){var e=""+(new Date).getTime(),t=parseInt(e.substring(0,e.length-3))-w,i=p(b,t,j,j,q,C),n=k+i;d(n),x("#qrcodeNum").text(n)}function d(e){var t=D.id?"#"+D.id:"#qrcodeCanvas",i=x(t).width()||256,n=x(t).width()||256,s="#efefef",d="#424647";D.width&&(i=D.width),D.height&&(n=D.height),D.foreground&&(d=D.foreground),D.background&&(s=D.background),x(t).empty(),x(t).qrcode({width:i,height:n,background:s,foreground:d,text:e})}function r(e,t,i,n,d,r,a){k=e,b=t,j=i,q=n,w=d,C=r,D=a,D||(D={});var p=setInterval(s,1e3);return s(),p}function a(e,t,i){for(var n="",s=t+e+i,d=m(s),r=0,a=0;r<d.length&&6>a;){var p=d[r++];isNaN(p)||(n+=p,a++)}return n}function p(e,t,i,n,s,d){if(8!=n.length&&11!=n.length)return null;var r=a(e,t,i),p=n+r,o=y(p,s.substr(0,3),d);return o}function o(e,t){return v(h(e,t))}function c(e,t){e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t;for(var i=Array(80),n=1732584193,s=-271733879,d=-1732584194,r=271733878,a=-1009589776,p=0;p<e.length;p+=16){for(var o=n,c=s,h=d,g=r,v=a,m=0;80>m;m++){i[m]=16>m?e[p+m]:f(i[m-3]^i[m-8]^i[m-14]^i[m-16],1);var x=l(l(f(n,5),u(m,s,d,r)),l(l(a,i[m]),_(m)));a=r,r=d,d=f(s,30),s=n,n=x}n=l(n,o),s=l(s,c),d=l(d,h),r=l(r,g),a=l(a,v)}return Array(n,s,d,r,a)}function u(e,t,i,n){return 20>e?t&i|~t&n:40>e?t^i^n:60>e?t&i|t&n|i&n:t^i^n}function _(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}function h(e,t){var i=g(e);i.length>16&&(i=c(i,e.length*S));for(var n=Array(16),s=Array(16),d=0;16>d;d++)n[d]=909522486^i[d],s[d]=1549556828^i[d];var r=c(n.concat(g(t)),512+t.length*S);return c(s.concat(r),672)}function l(e,t){var i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16);return n<<16|65535&i}function f(e,t){return e<<t|e>>>32-t}function g(e){for(var t=Array(),i=(1<<S)-1,n=0;n<e.length*S;n+=S)t[n>>5]|=(e.charCodeAt(n/S)&i)<<32-S-n%32;return t}function v(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="",n=0;n<4*e.length;n+=3)for(var s=(e[n>>2]>>8*(3-n%4)&255)<<16|(e[n+1>>2]>>8*(3-(n+1)%4)&255)<<8|e[n+2>>2]>>8*(3-(n+2)%4)&255,d=0;4>d;d++)i+=8*n+6*d>32*e.length?T:t.charAt(s>>6*(3-d)&63);return i}var m=e("node_modules/egis-tsc/md5-min").hex_md5,x=e("node_modules/egis-jquery/jquery"),y=e("node_modules/egis-tsc/numberid").encodeNumberID;e("node_modules/egis-tsc/jquery.qrcode")();var I=function(e){this.useFakeDid=!1,this.p_device_id,this.p_session_id,this.p_time_offset,this.p_schedule_fun_id,this.p_tsc_code_fun_id,this.p_check_did_fun_id,this.p_relogin_schedule=9e5,this.p_partnerCode,this.p_appId,this.p_externalId,this.p_sdc_version="10",this.p_api_type,this.qr_defalult_options={useFakeDid:!1},this.cloud_app_key="de82967019906571ae879c460358e148",e&&(this.qr_options=x.extend({},this.qr_defalult_options,e))};I.prototype.init=function(e,t,i,n,s){this.p_partnerCode=e,this.p_appId=t,this.p_externalId=i,this.p_api_type=n,this.cloud_app_key=s,this.p_session_id=this.getSessionId();var d=(new Date).getTime();if(!this.qr_options.useFakeDid){var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src=(this.qr_options.didInitJsUrl||"https://pws.payegis.com.cn/did/js/dp.js")+"?appId="+this.p_appId+"&sessionId="+this.p_session_id+"&ts="+d,document.getElementsByTagName("head")[0].appendChild(r)}},I.prototype.getSessionId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,i="x"==e?t:3&t|8;return i.toString(16)})},I.prototype.requestDid=function(){if(this.qr_options.useFakeDid)this.p_device_id=this.guid();else{var e=document.createElement("script"),t=(new Date).getTime();e.type="text/javascript",e.async=!0;var i="appId="+this.p_appId+"&callback=didCallback&sessionId="+this.p_session_id+"&x-hmac-auth-date="+t,n=this.p_appId+":"+encodeURIComponent(this.sig(i));e.src=(this.qr_options.didRequestUrl||"https://pws.payegis.com.cn/did/rest/device/devicePrintId")+"?appId="+this.p_appId+"&sessionId="+this.p_session_id+"&callback=didCallback&sig="+n+"&ts="+t,document.getElementsByTagName("head")[0].appendChild(e)}},I.prototype.guid=function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},I.prototype.generateTscCode=function(){this.requestDid();var e=this;(null==I.p_device_id||""==I.p_device_id||"undefined"==I.p_device_id)&&(this.p_check_did_fun_id=setInterval(function(){e.beforeDidEnd(e)},500)),this.p_schedule_fun_id=setInterval(function(){e.tscFunc()},this.p_relogin_schedule)},I.prototype.tscFunc=function(){this.synctime(this),this.sdc_login(this)},I.prototype.beforeDidEnd=function(e){null!=e.p_device_id&&""!=e.p_device_id&&"undefined"!=e.p_device_id&&(clearInterval(e.p_check_did_fun_id),this.synctime(e),this.sdc_login(e))},I.prototype.sig=function(e){var t=encodeURIComponent(e);return t=t.replace("*","%2A"),t=t.replace(" ","%20"),o(this.cloud_app_key+"&",t)},I.prototype.sig0=function(e){var t=encodeURIComponent(e);return t=t.replace("*","%2A"),t=t.replace(" ","%20"),encodeURIComponent(o(this.cloud_app_key+"&",t))},I.prototype.synctime=function(e){var t=(new Date).getTime(),i="t="+t+"&x-hmac-auth-date="+t,n=e.p_appId+":"+this.sig(i),s=(this.qr_options.syncTimeUrl||"https://pws.payegis.com.cn/tsc")+"?t="+t;x.ajax({async:!1,url:s,dataType:"jsonp",jsonp:"jsoncallback",type:"GET",data:{"x-hmac-auth-date":t,"x-hmac-auth-signature":n},success:function(t){var i=""+(new Date).getTime();e.p_time_offset=i.substring(0,i.length-3)-t.data.timestamp}})},I.prototype.sdc_login=function(e){var t=(new Date).getTime(),i="appId="+e.p_appId+"&appPartner="+e.p_partnerCode+"&deviceId="+e.p_device_id+"&externalId="+e.p_externalId+"&t="+t+"&x-hmac-auth-date="+t,n=e.p_appId+":"+this.sig(i),s=(this.qr_options.userBindUrl||"https://pws.payegis.com.cn/tsc")+"?t="+t;x.ajax({url:s,dataType:"jsonp",jsonp:"jsoncallback",data:{appId:e.p_appId,appPartner:e.p_partnerCode,deviceId:e.p_device_id,externalId:e.p_externalId,"x-hmac-auth-date":t,"x-hmac-auth-signature":n},type:"GET",success:function(t){var i=t.data.uid;clearInterval(e.p_tsc_code_fun_id),e.p_tsc_code_fun_id=r(e.p_api_type,e.p_device_id,i,e.p_partnerCode,e.p_time_offset,e.p_sdc_version,e.qr_options)}})},I.prototype.setDeviceId=function(e){this.p_device_id=e},window.didCallback=function(e){null!=e&&""!=e&&"null"!=e&&tscSdkObj.setDeviceId(e)},window.tscSdkObj={};var k="",b="",j="",q="",w=0,C="",D={},T="=",S=8;i.exports={doGenTsc:n,TSCObject:I}});