define("components/systemManage/userManage/userManage.jsx",function(n,t){"use strict";function r(){function n(){return new p({el:"#modal-addUser",data:u})}l.html('<div class="page page-userManage">\r\n    <div class="page-tit">\r\n        <form role="form" class="page-tit-form" id="searchForm">\r\n            用户管理\r\n            <input type="hidden" name="page" value="1">\r\n            <input type="hidden" name="size" value="10">\r\n            <input type="hidden" name="order" value="desc">\r\n            <a href="javascript:;" class="btn btn-primary pull-right btn-addUser" id="btn-addUser">\r\n                <span class="glyphicon glyphicon-plus"></span>\r\n                创建新用户\r\n            </a>\r\n        </form>\r\n    </div>\r\n    <div class="page-cont">\r\n        <table id="listTable" class="merchant-manage default-list box table table-hover table-bordered">\r\n            <thead>\r\n            <tr>\r\n                <th>用户</th>\r\n                <th>医院名称</th>\r\n                <th>角色</th>\r\n                <!--<th>状态</th>-->\r\n                <th>修改日期</th>\r\n                <th>操作</th>\r\n            </tr>\r\n            <tbody>\r\n                <script type="text/html" id="list-tpl">\r\n                    {{ if items && items.length > 0 }}\r\n                    {{each items as item i}}\r\n                    <tr>\r\n                        <td>{{ item.email }}</td>\r\n                        <td>{{ item.name }}</td>\r\n                        <td>\r\n                            {{ if item.roleId == 1}}\r\n                                超级管理员\r\n                            {{ else if item.roleId == 2}}\r\n                                审核员\r\n                            {{else}}\r\n                                普通用户\r\n                            {{/if}}\r\n                        </td>\r\n                        <!--<td>{{ item.state }}</td>-->\r\n                        <td>{{ item.updateAt }}</td>\r\n                        <td>\r\n                            <!--<a class="btn btn-info btn-transparent btn-modify" title="已启用" data-toggle="modal" data-id="{{ item.id }}" data-target="#modal-modifyService1">-->\r\n                                <!--<span class="glyphicon glyphicon-ok-circle"></span>-->\r\n                            <!--</a>-->\r\n                            <a class="btn btn-info btn-transparent btn-updateUser" title="编辑用户" data-id="{{ item.id }}">\r\n                                <span class="glyphicon glyphicon-edit"></span>\r\n                            </a>\r\n                            <a class="btn btn-info btn-transparent btn-delete" title="删除用户" data-id="{{ item.id }}" data-name="{{ item.name }}" data-placement="left" data-toggle="confirmation" data-original-title="确认删除?">\r\n                                <span class="glyphicon glyphicon-trash"></span>\r\n                            </a>\r\n                        </td>\r\n                    </tr>\r\n                    {{/each}}\r\n                    {{else}}\r\n                    <tr>\r\n                        <td colspan="5">未搜索到符合该条件的记录！</td>\r\n                    </tr>\r\n                    {{ /if }}\r\n                </script>\r\n            </tbody>\r\n        </table>\r\n\r\n        <div id="pagination" class="pagination-wrap">\r\n            <ul id="pagination-content" class="page_box">\r\n\r\n            </ul>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>\r\n\r\n<!--新增用户弹框-->\r\n<div class="modal fade modal-addUser" id="modal-addUser" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n    <div class="modal-dialog">\r\n        <div class="modal-content">\r\n            <div class="modal-header clearfix">\r\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n                <h4 class="modal-title">新增用户</h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <form class="" action="" id="modal-addUser-form">\r\n                    <table class="modal-table modal-addUser-table">\r\n                        <tr>\r\n                            <td class="text-right">账号</td>\r\n                            <td>\r\n                                <input type="text" name="email" v-model="email" required="required" class="form-control unitInput"\r\n                                       data-vd-msg="请输入账号" data-vd-type="email" data-vd-typeMsg="请输入一个邮箱" placeholder="请输入一个邮箱"/>\r\n                            </td>\r\n                            <td class="color-red">\r\n                                <span class="color-red">*</span>\r\n                                <span class="errowMsg"></span>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td class="text-right">医院名称</td>\r\n                            <td>\r\n                                <input type="text" name="name" v-model="name" required="required" class="form-control unitInput"\r\n                                       data-vd-msg="请输入名称"/>\r\n                            </td>\r\n                            <td class="color-red">\r\n                                <span class="color-red">*</span>\r\n                                <span class="errowMsg"></span>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td class="text-right">密码</td>\r\n                            <td>\r\n                                <input type="password" name="password" v-model="password" required="required"\r\n                                       class="form-control unitInput" data-vd-msg="请输入密码"/>\r\n                            </td>\r\n                            <td class="color-red">\r\n                                <span class="color-red">*</span>\r\n                                <span class="errowMsg"></span>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td class="text-right">确认密码</td>\r\n                            <td>\r\n                                <input type="password" name="rePassword" v-model="rePassword" required="required"\r\n                                       class="form-control unitInput" data-vd-msg="请输入确认密码"/>\r\n                            </td>\r\n                            <td class="color-red">\r\n                                <span class="color-red">*</span>\r\n                                <span class="errowMsg"></span>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td class="text-right">角色</td>\r\n                            <td>\r\n                                <label>\r\n                                    <input type="radio" name="roleId" v-model="roleId" value="1" required="required" data-vd-msg="请选择一个角色">\r\n                                    超级管理员\r\n                                </label>\r\n\r\n                                <label>\r\n                                    <input type="radio" name="roleId" v-model="roleId" value="2" required="required" data-vd-msg="请选择一个角色">\r\n                                    审核员\r\n                                </label>\r\n\r\n                                <label>\r\n                                    <input type="radio" name="roleId" v-model="roleId" value="3" required="required" data-vd-msg="请选择一个角色">\r\n                                    普通用户\r\n                                </label>\r\n                            </td>\r\n                            <td class="color-red">\r\n                                <span class="errowMsg"></span>\r\n                            </td>\r\n                        </tr>\r\n                    </table>\r\n                </form>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-gray btn-cancel" data-dismiss="modal">取消</button>\r\n                <button type="button" class="btn btn-lightBlue btn-addUserConfirm">确认</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n');var t=a("#searchForm"),r=t.find("input[name=page]"),i=t.find("input[name=size]"),c=(a("#pagination"),d.compile(a("#list-tpl").html()));t.on("submit",function(n){var d=a(this),l=d.find("input[type=submit]");return n&&n.preventDefault(),l.prop("disabled")?!1:void e(window.apiHost+"users/listUser.do",o(d),function(n){var o=n.data||{};a(".page-userManage #listTable").find("tbody").html(c(o)),a(".page-userManage #listTable .btn-delete").confirmation({btnOkLabel:"确认",btnCancelLabel:"取消",onShow:function(){},onHide:function(){},onConfirm:function(n,r){var d=a(r).attr("data-id"),i=a(r).attr("data-name");"superDevAdmin"!=i?e(window.apiHost+"users/deleteUser.do",{id:d},function(){t.trigger("submit"),s.info("删除用户成功！")},null,null,"get"):s.alert("此管理员不能被删除！")}}),a("#pagination-content").pagination({$form:d,first:"<<",prev:"<",next:">",last:">>",pageSize:parseInt(i.val()),totalSize:o.totalElements,info:!0,infoContainer:".pagination-wrap",paginationInfoTpl:'<div class="pagination-TotalInfo">总条数 '+o.totalElements+' 条</div><div class="pagination-info-content"><input type="text" class="info-currentPage" name="currentPage" />&nbsp;/&nbsp;'+o.totalPages+'页&nbsp;&nbsp;<a href="javascript:;" class="info-goToPage">GO</a></div>',visiblePages:5,onPageClick:function(n,t){r.val(t),d.trigger("submit")}})},function(){l.prop("disabled",!0)},function(){l.prop("disabled",!1)},"get")}).trigger("submit");var u={id:0,email:"",name:"",password:"",rePassword:"",roleId:""},g=a("#modal-addUser");n();var b="add";a(".btn-addUser").click(function(){return g.modal("show"),g.find(".modal-title").html("新增用户"),g.find("form")[0].reset(),b="add",!1}),a(".page-userManage").on("click",".btn-updateUser",function(){g.modal("show"),g.find(".modal-title").html("修改用户"),g.find("form")[0].reset(),b="edit";var n=a(this).attr("data-id");return e(window.apiHost+"users/getUserById.do",{id:n},function(n){var t=n.data||{};u=a.extend(u,t)},function(){},function(){},"post"),!1}),g.find(".btn-addUserConfirm").click(function(){var n=a(this);if(!n.hasClass("disable")&&m(g.find("form")))if(u.password==u.rePassword){var r,d;"add"==b?(r=window.apiHost+"users/addUser.do",d="新增用户成功！"):(r=window.apiHost+"users/updateUser.do",d="修改用户成功！"),e(r,u,function(n){n.data||{};s.info(d),g.modal("hide"),t.trigger("submit")},function(){n.prop("disabled",!0)},function(){n.prop("disabled",!1)},"post")}else s.alert("两次密码不相同！");return!1})}var a=n("node_modules/egis-jquery/jquery");n("node_modules/egis-bootstrap/confirmation")(),n("node_modules/egis-bootstrap/bootstrap")();var e=n("components/util/ajax").ajax;n("node_modules/egis-pagination/pagination")(a);var d=n("node_modules/egis-template/template"),s=(n("node_modules/egis-load-css/load-css"),n("node_modules/egis-checkbox/checkbox"),n("node_modules/egis-system-message/system-message")),i=n("node_modules/egis-xhr/xhr"),o=i.clearEmptyValue,l=a("aside"),p=n("node_modules/vue/dist/vue"),m=(n("node_modules/egis-get-query-string/get-query-string"),n("node_modules/egis-validate/regs"),n("node_modules/egis-validate/validate").validateForm);t.render=r});