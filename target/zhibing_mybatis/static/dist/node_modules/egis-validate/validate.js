define('node_modules/egis-validate/validate', function(require, exports, module) {

  
      var $=require('node_modules/egis-jquery/jquery');
      var systemMessage=require('node_modules/egis-system-message/system-message');
      var regs=require('node_modules/egis-validate/regs');
  
      function validateForm($form){
          var canSubmit=true;
          var $requireItems=$form.find('select[required],input[required],textarea[required]');
  
          $requireItems.each(function(index){
              var $currItem=$(this),
                  type=$currItem.get(0).tagName,
                  msg=$currItem.attr('data-vd-msg'),
                  valueType=$currItem.attr('data-vd-type'),//attr('data-vd-type')||'input'
                  valueMsg=$currItem.attr('data-vd-typeMsg'),
                  value;
              if(type=='SELECT'){
                  value=$currItem.find('option:selected').val();
                  //select只需判断有无值
                  if(!value){
                      canSubmit=false;
                      systemMessage.alert(msg);
                      $currItem.focus();
                      return false;
                  }
              }else if(type=='INPUT'||'TEXTAREA'){
  
                  if($currItem.attr('type')=='checkbox'||$currItem.attr('type')=='radio'){
                      var name=$currItem.attr('name');
  
                      if(!$form.find('input[name='+name+']:checked').val()){
                          //没有勾选
                          canSubmit=false;
                          systemMessage.alert(msg);
                          $currItem.focus();
                          return false;
                      }
                  }else{
                      value= $.trim($currItem.val());
  
                      //没有定义值类型，默认只检测是否为空
                      if(!value){
                          canSubmit=false;
                          systemMessage.alert(msg);
                          $currItem.focus();
                          return false;
                      }else{
                          //根据定义的值类型，去判断值是否正确，不正确则提示定义的消息
                          if(valueType){
                              if (regs[valueType] && !regs[valueType].test(value)) {
                                  canSubmit=false;
                                  systemMessage.alert(valueMsg);
                                  $currItem.focus();
                                  return false;
                              }
                          }else{
                              //todo 如果regs模块不存在该类型，则默认它为自定义正则字符串表达式
  
                          }
                      }
                  }
  
              }
          });
  
          return canSubmit;
      }
      exports.validateForm=validateForm;

});
